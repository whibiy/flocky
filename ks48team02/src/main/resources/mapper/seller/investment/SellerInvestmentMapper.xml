<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ksmart.ks48team02.seller.mapper.investment.SellerInvestmentMapper">

    <resultMap type="AdminInvestment" id="adminInvestmentListMap">
        <id property="investmentCode" column="investment_code"/>
        <result property="memberId" column="member_id"/>
        <result property="storeCode" column="store_code"/>
        <result property="investmentRequestJudgeCode" column="investment_request_judge_code"/>
        <result property="totalCategoryCode" column="total_category_code"/>
        <result property="memberIdSeller" column="member_id_seller"/>
        <result property="investmentSubject" column="investment_subject"/>
        <result property="investmentContent" column="investment_content"/>
        <result property="investmentImage" column="investment_image"/>
        <result property="investmentLike" column="investment_like"/>
        <result property="investmentAmount" column="investment_amount"/>
        <result property="invInvestmentAchievementMoney" column="invInvestmentAchievementMoney"/>
        <result property="investAchievementPercent" column="invest_achievement_percent"/>
        <result property="investmentCompany" column="investment_company"/>
        <result property="searchCount" column="search_count"/>
        <result property="investCount" column="invest_count"/>
        <result property="securitiesClassification" column="securities_classification"/>
        <result property="investmentDisplayDate" column="investment_display_date"/>
        <result property="investmentRegDate" column="investment_reg_date"/>
        <result property="investmentDeadline" column="investment_deadline"/>
        <result property="investmentReport" column="investment_report"/>
        <result property="basicFee" column="basic_fee"/>
        <result property="contractFeeRate" column="contract_fee_rate"/>
        <result property="contractFile" column="contract_file"/>
        <result property="investJudgeSituation" column="invest_judge_situation"/>

        <association property="adminInvestmentRequestJudge" javaType="AdminInvestmentRequestJudge">
            <id property="investmentRequestJudgeCode" column="investment_request_judge_code"/>
            <result property="lawSatistifyCode" column="law_satistify_code"/>
            <result property="incongruitySectorsCode" column="incongruity_sectors_code"/>
            <result property="companyBusinessTypeCode" column="company_business_type_code"/>
            <result property="corporateValueEvaluationCode" column="corporate_value_evaluation_code"/>
            <result property="storeCode" column="store_code"/>
            <result property="investmentRequestSubject" column="investment_request_subject"/>
            <result property="memberIdSeller" column="member_id_seller"/>
            <result property="storeName" column="store_name"/>
            <result property="investmentCompany" column="investment_company"/>
            <result property="representativeName" column="representative_name"/>
            <result property="invBusinessType" column="business_type"/>
            <result property="investmentRequestContent" column="investment_request_content"/>
            <result property="investmentAchievementMoney" column="investment_achievement_money"/>
            <result property="lawSatistifyReason" column="law_satistify_reason"/>
            <result property="businessProfits" column="business_profits"/>
            <result property="depreciation" column="depreciation"/>
            <result property="netDebt" column="net_debt"/>
            <result property="stockNumber" column="stock_number"/>
            <result property="issueStockNumber" column="issue_stock_number"/>
            <result property="investmentRequestDate" column="investment_request_date"/>
            <result property="investJudgeDate" column="invest_judge_date"/>
            <result property="memberId" column="member_id"/>
            <result property="investJudgeResult" column="invest_judge_result"/>
            <result property="todayRequestCnt" column="todayRequestCnt"/>
            <result property="standbyCnt" column="standbyCnt"/>
            <result property="todayProceedCnt" column="todayProceedCnt"/>
            <result property="rejectCnt" column="rejectCnt"/>
            <result property="cbtBusinessType" column="cbtBusinessType"/>
        </association>

        <association property="sellerInvestmentContent" javaType="SellerInvestmentContent">
            <id property="investmentContentCode" column="investment_content_code"/>
            <result property="memberId" column="member_id"/>
            <result property="investmentCode" column="investment_code"/>
            <result property="memberIdAdmin" column="member_id_admin"/>
            <result property="projectIntroduction" column="project_introduction"/>
            <result property="investmentIntroductionImage" column="investment_introduction_image"/>
            <result property="marketAnalysis" column="market_analysis"/>
            <result property="marketAnalysisImage" column="market_analysis_image"/>
            <result property="majorFinancialInformation" column="major_financial_information"/>
            <result property="majorFinancialInformationImage" column="major_financial_information_image"/>
            <result property="risk" column="risk"/>
            <result property="riskImage" column="risk_image"/>
            <result property="majorManpower" column="major_manpower"/>
            <result property="majorManpowerImage" column="major_manpower_image"/>
            <result property="patentAwardDetails" column="patent_award_details"/>
            <result property="patentAwardDetailsImage" column="patent_award_details_image"/>
            <result property="etcInvestContent" column="etc_invest_content"/>
            <result property="etcInvestContentImage" column="etc_invest_content_image"/>
            <result property="registrationDate" column="registration_date"/>
        </association>

        <association property="sellersecuritiesIssuanceStock" javaType="SellersecuritiesIssuanceStock">
            <id property="securitiesIssuanceStockCode" column="securities_issuance_stock_code"/>
            <result property="investmentCode" column="investment_code"/>
            <result property="corpValue" column="corp_value"/>
            <result property="stockPrice" column="stock_price"/>
            <result property="minDividendRate" column="min_dividend_rate"/>
        </association>
    </resultMap>

    <resultMap type="AdminInvestmentRequestJudge" id="adminInvestmentRequestJudgeListMap">
        <id property="investmentRequestJudgeCode" column="investment_request_judge_code"/>
        <result property="lawSatistifyCode" column="law_satistify_code"/>
        <result property="incongruitySectorsCode" column="incongruity_sectors_code"/>
        <result property="companyBusinessTypeCode" column="company_business_type_code"/>
        <result property="corporateValueEvaluationCode" column="corporate_value_evaluation_code"/>
        <result property="storeCode" column="store_code"/>
        <result property="investmentRequestSubject" column="investment_request_subject"/>
        <result property="memberIdSeller" column="member_id_seller"/>
        <result property="storeName" column="store_name"/>
        <result property="investmentCompany" column="investment_company"/>
        <result property="representativeName" column="representative_name"/>
        <result property="invBusinessType" column="business_type"/>
        <result property="investmentRequestContent" column="investment_request_content"/>
        <result property="investmentAchievementMoney" column="investment_achievement_money"/>
        <result property="lawSatistifyReason" column="law_satistify_reason"/>
        <result property="businessProfits" column="business_profits"/>
        <result property="depreciation" column="depreciation"/>
        <result property="netDebt" column="net_debt"/>
        <result property="stockNumber" column="stock_number"/>
        <result property="issueStockNumber" column="issue_stock_number"/>
        <result property="investmentRequestDate" column="investment_request_date"/>
        <result property="investJudgeDate" column="invest_judge_date"/>
        <result property="memberId" column="member_id"/>
        <result property="investJudgeResult" column="invest_judge_result"/>
        <result property="todayRequestCnt" column="todayRequestCnt"/>
        <result property="standbyCnt" column="standbyCnt"/>
        <result property="todayProceedCnt" column="todayProceedCnt"/>
        <result property="rejectCnt" column="rejectCnt"/>
        <result property="cbtBusinessType" column="cbtBusinessType"/>

        <association property="adminInvestment" javaType="AdminInvestment">
            <id property="investmentCode" column="investment_code"/>
            <result property="memberId" column="member_id"/>
            <result property="storeCode" column="store_code"/>
            <result property="investmentRequestJudgeCode" column="investment_request_judge_code"/>
            <result property="totalCategoryCode" column="total_category_code"/>
            <result property="memberIdSeller" column="member_id_seller"/>
            <result property="investmentSubject" column="investment_subject"/>
            <result property="investmentContent" column="investment_content"/>
            <result property="investmentImage" column="investment_image"/>
            <result property="investmentLike" column="investment_like"/>
            <result property="investmentAmount" column="investment_amount"/>
            <result property="invInvestmentAchievementMoney" column="invInvestmentAchievementMoney"/>
            <result property="investAchievementPercent" column="invest_achievement_percent"/>
            <result property="investmentCompany" column="investment_company"/>
            <result property="searchCount" column="search_count"/>
            <result property="investCount" column="invest_count"/>
            <result property="securitiesClassification" column="securities_classification"/>
            <result property="investmentDisplayDate" column="investment_display_date"/>
            <result property="investmentRegDate" column="investment_reg_date"/>
            <result property="investmentDeadline" column="investment_deadline"/>
            <result property="investmentReport" column="investment_report"/>
            <result property="basicFee" column="basic_fee"/>
            <result property="contractFeeRate" column="contract_fee_rate"/>
            <result property="contractFile" column="contract_file"/>
            <result property="investJudgeSituation" column="invest_judge_situation"/>
        </association>
    </resultMap>

    <resultMap type="SellerAfterFundRevenueStock" id="sellerAfterFundRevenueStockListMap">
        <id property="afterFundRevenueStockCode" column="after_fund_revenue_stock_code"/>
        <result property="memberId" column="member_id"/>
        <result property="investmentCode" column="investment_code"/>
        <result property="securitiesIssuanceStockCode" column="securities_issuance_stock_code"/>
        <result property="afterInvestmentAmount" column="after_investment_amount"/>
        <result property="investmentAmount" column="investment_amount"/>
        <result property="take" column="take"/>
        <result property="costOfSales" column="cost_of_sales"/>
        <result property="grossProfit" column="gross_profit"/>
        <result property="operatingProfit" column="operating_profit"/>
        <result property="operatingCost" column="operating_cost"/>
        <result property="netIncome" column="net_income"/>
        <result property="salesDateEnterpriseValue" column="sales_date_enterprise_value"/>
        <result property="subscriptionEnterpriseValue" column="subscription_enterprise_value"/>
        <result property="salesBaseStockPrice" column="sales_base_stock_price"/>
        <result property="issuePrice" column="issue_price"/>
        <result property="totalStockNumber" column="total_stock_number"/>
        <result property="dividendAmount" column="dividend_amount"/>
        <result property="dividendRate" column="dividend_rate"/>
        <result property="dividendPerStock" column="dividend_per_stock"/>
        <result property="earningsPerShare" column="earnings_per_share"/>
        <result property="revenuePeriodStart" column="revenue_period_start"/>
        <result property="revenuePeriodEnd" column="revenue_period_end"/>
        <result property="uploadDate" column="upload_date"/>
    </resultMap>

    <resultMap type="SellerAfterFundRevenueBond" id="sellerAfterFundRevenueBondListMap">
        <id property="afterFundRevenueBondCode" column="after_fund_revenue_bond_code"/>
        <result property="memberId" column="member_id"/>
        <result property="investmentCode" column="investment_code"/>
        <result property="securitiesIssuanceBondCode" column="securities_issuance_bond_code"/>
        <result property="afterInvestmentAmount" column="after_investment_amount"/>
        <result property="investmentAmount" column="investment_amount"/>
        <result property="take" column="take"/>
        <result property="profit" column="profit"/>
        <result property="cost" column="cost"/>
        <result property="netIncome" column="net_income"/>
        <result property="visitorsNumber" column="visitors_number"/>
        <result property="accountPrice" column="account_price"/>
        <result property="interestRate" column="interest_rate"/>
        <result property="totalBondNumber" column="total_bond_number"/>
        <result property="earningsPerAccount" column="earnings_per_account"/>
        <result property="revenuePeriodStart" column="revenue_period_start"/>
        <result property="revenuePeriodEnd" column="revenue_period_end"/>
        <result property="uploadDate" column="upload_date"/>
    </resultMap>

    <resultMap id="sellerAfterInvestDivisionListMap" type="SellerAfterInvestDivision">
        <id property="afterInvestDivisionCode" column="after_invest_division_code"/>
        <result property="memberId" column="member_id"/>
        <result property="investmentCode" column="investment_code"/>
        <result property="memberIdCustomer" column="member_id_customer"/>
        <result property="investCost" column="invest_cost"/>
        <result property="afterOperateDivision" column="after_operate_division"/>
        <result property="afterOperateDivisionAccumulate" column="after_operate_division_accumulate"/>
        <result property="round" column="round"/>
        <result property="divisionDate" column="division_date"/>
    </resultMap>

    <resultMap type="AdminLawSatistifyReason" id="adminLawSatistifyReasonListMap">
        <id property="lawSatistifyCode" column="law_satistify_code"/>
        <result property="lawSatistifyReason" column="law_satistify_reason"/>
        <result property="memberId" column="member_id"/>
        <result property="lawSatistifyWhether" column="law_satistify_whether"/>
        <result property="codeRegDay" column="code_reg_day"/>
    </resultMap>

    <resultMap type="AdminIncongruitySectors" id="adminIncongruitySectorsListMap">
        <id property="incongruitySectorsCode" column="incongruity_sectors_code"/>
        <result property="incongruitySectorsBusiness" column="incongruity_sectors_business"/>
        <result property="memberId" column="member_id"/>
        <result property="incongruitySectorsWhether" column="incongruity_sectors_whether"/>
        <result property="codeRegDay" column="code_reg_day"/>
    </resultMap>

    <resultMap type="AdminCorporateValueEvaluation" id="adminCorporateValueEvaluationListMap">
        <id property="corporateValueEvaluationCode" column="corporate_value_evaluation_code"/>
        <result property="memberId" column="member_id"/>
        <result property="operatingProfit" column="operating_profit"/>
        <result property="depreciation" column="depreciation"/>
        <result property="ebitda" column="ebitda"/>
        <result property="evEbitda" column="ev_ebitda"/>
        <result property="convertEv" column="convert_ev"/>
        <result property="netDebt" column="net_debt"/>
        <result property="evaluatedCorpValue" column="evaluated_corp_value"/>
        <result property="stockNumber" column="stock_number"/>
        <result property="stockPrice" column="stock_price"/>
        <result property="corpValueFulfill" column="corp_value_fulfill"/>
        <result property="corpValueEvaluateDay" column="corp_value_evaluate_day"/>

        <association property="adminInvestmentRequestJudge" javaType="AdminInvestmentRequestJudge">
            <id property="investmentRequestJudgeCode" column="investment_request_judge_code"/>
            <result property="lawSatistifyCode" column="law_satistify_code"/>
            <result property="incongruitySectorsCode" column="incongruity_sectors_code"/>
            <result property="companyBusinessTypeCode" column="company_business_type_code"/>
            <result property="corporateValueEvaluationCode" column="corporate_value_evaluation_code"/>
            <result property="storeCode" column="store_code"/>
            <result property="investmentRequestSubject" column="investment_request_subject"/>
            <result property="memberIdSeller" column="member_id_seller"/>
            <result property="investmentCompany" column="investment_company"/>
            <result property="invBusinessType" column="business_type"/>
            <result property="investmentRequestContent" column="investment_request_content"/>
            <result property="investmentAchievementMoney" column="investment_achievement_money"/>
            <result property="lawSatistifyReason" column="law_satistify_reason"/>
            <result property="businessProfits" column="business_profits"/>
            <result property="depreciation" column="depreciation"/>
            <result property="netDebt" column="net_debt"/>
            <result property="stockNumber" column="stock_number"/>
            <result property="issueStockNumber" column="issue_stock_number"/>
            <result property="investmentRequestDate" column="investment_request_date"/>
            <result property="investJudgeDate" column="invest_judge_date"/>
            <result property="memberId" column="member_id"/>
            <result property="investJudgeResult" column="invest_judge_result"/>
            <result property="todayRequestCnt" column="todayRequestCnt"/>
            <result property="standbyCnt" column="standbyCnt"/>
            <result property="todayProceedCnt" column="todayProceedCnt"/>
            <result property="rejectCnt" column="rejectCnt"/>
            <result property="cbtBusinessType" column="cbtBusinessType"/>
        </association>
    </resultMap>

    <resultMap type="SellerInvestmentContent" id="sellerInvestmentContentList">
        <id property="investmentContentCode" column="investment_content_code"/>
        <result property="memberId" column="member_id"/>
        <result property="investmentCode" column="investment_code"/>
        <result property="memberIdAdmin" column="member_id_admin"/>
        <result property="projectIntroduction" column="project_introduction"/>
        <result property="investmentIntroductionImage" column="investment_introduction_image"/>
        <result property="marketAnalysis" column="market_analysis"/>
        <result property="marketAnalysisImage" column="market_analysis_image"/>
        <result property="majorFinancialInformation" column="major_financial_information"/>
        <result property="majorFinancialInformationImage" column="major_financial_information_image"/>
        <result property="risk" column="risk"/>
        <result property="riskImage" column="risk_image"/>
        <result property="majorManpower" column="major_manpower"/>
        <result property="majorManpowerImage" column="major_manpower_image"/>
        <result property="patentAwardDetails" column="patent_award_details"/>
        <result property="patentAwardDetailsImage" column="patent_award_details_image"/>
        <result property="etcInvestContent" column="etc_invest_content"/>
        <result property="etcInvestContentImage" column="etc_invest_content_image"/>
        <result property="registrationDate" column="registration_date"/>
    </resultMap>

    <!-- 판매자 투자펀딩 공고 목록 조회(페이징x) -->
    <select id="getInvestmentListOnly" resultMap="adminInvestmentListMap">
        /* 판매자 투자펀딩 공고 목록 조회(페이징x) */
        SELECT
        i.investment_code,
        i.investment_request_judge_code,
        i.member_id_seller,
        i.investment_subject,
        i.investment_like,
        i.investment_amount,
        i.investment_achievement_money AS invInvestmentAchievementMoney,
        i.invest_achievement_percent,
        i.investment_company,
        i.search_count,
        i.invest_count,
        i.securities_classification,
        i.investment_display_date,
        i.investment_deadline,
        i.invest_judge_situation
        FROM
        investment AS i
        WHERE
        i.member_id_seller = #{memberIdSeller};
    </select>

    <!-- 판매자 투자펀딩 공고 목록 조회 -->
    <select id="getInvestmentList" resultMap="adminInvestmentListMap">
        /* 판매자 투자펀딩 공고 목록 조회 */
        SELECT
            i.investment_code,
            i.investment_request_judge_code,
            i.member_id_seller,
            i.investment_subject,
            i.investment_like,
            i.investment_amount,
            i.investment_achievement_money AS invInvestmentAchievementMoney,
            i.invest_achievement_percent,
            i.investment_company,
            i.search_count,
            i.invest_count,
            i.securities_classification,
            i.investment_display_date,
            i.investment_deadline,
            i.invest_judge_situation
        FROM
            investment AS i
        WHERE
            i.member_id_seller = #{memberIdSeller}
        <if test="startRowNum > -1">
            LIMIT #{startRowNum}, #{rowPerPage};
        </if>
    </select>

    <!-- 판매자 투자펀딩 공고 전체 행의 갯수 -->
    <select id="getInvestment" resultType="int">
        /* 판매자 투자펀딩 공고 전체 행의 갯수 */
        SELECT
            COUNT(1)
        FROM
            investment;
    </select>

    <!-- 판매자 검색조건에 따른 투자펀딩 공고 목록 조회 -->
    <select id="getInvestmentListBySearch" resultMap="adminInvestmentListMap">
        /* 판매자 검색조건에 따른 투자펀딩 공고 목록 조회 */
        SELECT
            i.investment_code,
            i.investment_request_judge_code,
            i.member_id_seller,
            i.investment_subject,
            i.investment_like,
            i.investment_amount,
            i.investment_achievement_money AS invInvestmentAchievementMoney,
            i.invest_achievement_percent,
            i.investment_company,
            i.search_count,
            i.invest_count,
            i.securities_classification,
            i.investment_display_date,
            i.investment_deadline,
            i.invest_judge_situation
        FROM
            investment AS i
        <where>
            <if test="amDateSettStartDate != null and amDateSettStartDate != ''">
                DATE_FORMAT(i.investment_request_date, '%Y-%m-%d') >= #{amDateSettStartDate}
                AND
            </if>
            <if test="amDateSettEndDate != null and amDateSettEndDate != ''">
                #{amDateSettEndDate} >= DATE_FORMAT(i.investment_request_date, '%Y-%m-%d')
                AND
            </if>
            <if test="searchKey != null and searchKey != '' and searchSelectValue != null and searchSelectValue != ''">
                ${searchKey} = #{searchSelectValue}
                AND
            </if>
            <if test="searchKey != null and searchKey != ''">
                ${searchKey} LIKE CONCAT('%', #{searchValue}, '%')
                AND
            </if>
            i.member_id_seller = #{memberIdSeller}
        </where>
        <if test="startRowNum > -1">
            LIMIT #{startRowNum}, #{rowPerPage};
        </if>
    </select>

    <!-- 판매자 특정 투자펀딩 공고 조회 -->
    <select id="getInvestementByCode" resultMap="adminInvestmentListMap">
        /* 판매자 특정 투자펀딩 공고 조회 */
        SELECT
            i.investment_request_judge_code,
            ir.investment_request_subject,
            ir.investment_request_content,
            ir.investment_request_date,
            ir.investment_achievement_money,
            ir.business_profits,
            ir.depreciation,
            ir.net_debt,
            ir.issue_stock_number,
            i.investment_code,
            i.investment_subject,
            i.store_code,
            s.store_name,
            i.total_category_code,
            i.investment_company,
            i.member_id_seller,
            s.representative_name,
            ic.investment_content_code,
            ic.project_introduction,
            ic.market_analysis,
            ic.major_financial_information,
            ic.risk,
            ic.major_manpower,
            ic.patent_award_details,
            ic.etc_invest_content,
            i.investment_like,
            i.investment_amount,
            i.investment_achievement_money AS invInvestmentAchievementMoney,
            i.invest_achievement_percent,
            i.search_count,
            i.invest_count,
            i.securities_classification,
            i.investment_display_date,
            i.investment_reg_date,
            i.investment_deadline,
            i.basic_fee,
            i.contract_fee_rate,
            i.invest_judge_situation,
            sis.corp_value,
            sis.stock_price,
            sis.min_dividend_rate
        FROM
            investment AS i
            INNER JOIN
            store AS s
            ON
            i.store_code = s.store_code
            INNER JOIN
            investment_content AS ic
            ON
            i.investment_code = ic.investment_code
            INNER JOIN
            investment_request_judge AS ir
            ON
            i.investment_request_judge_code = ir.investment_request_judge_code
            LEFT JOIN
            securities_issuance_stock AS sis
            ON
            i.investment_code = sis.investment_code
        WHERE
            i.member_id_seller = #{memberIdSeller}
            AND
            i.investment_code = #{investmentCode};
    </select>

    <!-- 판매자 투자펀딩 심사요청 목록 조회 -->
    <select id="getInvestmentRequestJudgeList" resultMap="adminInvestmentRequestJudgeListMap">
        /* 판매자 투자펀딩 심사요청 목록 조회 */
        SELECT
            i.investment_request_judge_code,
            i.investment_request_subject,
            i.member_id_seller,
            s.store_name,
            s.corporate_name AS corporateName,
            i.investment_company,
            s.representative_name,
            i.investment_achievement_money,
            i.investment_request_date,
            i.invest_judge_date,
            i.member_id,
            i.invest_judge_result
        FROM
            investment_request_judge AS i
            INNER JOIN
            store AS s
            ON
            i.store_code = s.store_code
        WHERE
            i.member_id_seller = #{memberIdSeller}
        ORDER BY i.investment_request_judge_code DESC
        <if test="startRowNum > -1">
            LIMIT #{startRowNum}, #{rowPerPage};
        </if>
    </select>

    <!-- 판매자 투자펀딩 심사요청 전체 행의 갯수 -->
    <select id="getInvestmentRequestJudgeCnt" resultType="int">
        /* 판매자 투자펀딩 심사요청 전체 행의 갯수 */
        SELECT
            COUNT(1)
        FROM
            investment_request_judge;
    </select>

    <!-- 판매자 검색조건에 따른 투자펀딩 심사요청 목록 조회 -->
    <select id="getInvestmentRequestJudgeListBySearch" parameterType="String" resultMap="adminInvestmentRequestJudgeListMap">
        /* 검색조건에 따른 투자펀딩 심사요청 목록 조회 */
        SELECT
            i.investment_request_judge_code,
            i.investment_request_subject,
            i.member_id_seller,
            s.store_name,
            s.corporate_name AS corporateName,
            i.investment_company,
            s.representative_name,
            i.investment_achievement_money,
            i.investment_request_date,
            i.invest_judge_date,
            i.member_id,
            i.invest_judge_result
        FROM
            investment_request_judge AS i
            INNER JOIN
            store AS s
            ON
            i.store_code = s.store_code
        <where>
            <if test="amDateSettStartDate != null and amDateSettStartDate != ''">
                DATE_FORMAT(i.investment_request_date, '%Y-%m-%d') >= #{amDateSettStartDate}
                AND
            </if>
            <if test="amDateSettEndDate != null and amDateSettEndDate != ''">
                #{amDateSettEndDate} >= DATE_FORMAT(i.investment_request_date, '%Y-%m-%d')
                AND
            </if>
            <if test="searchKey != null and searchKey != '' and searchSelectValue != null and searchSelectValue != ''">
                ${searchKey} = #{searchSelectValue}
                AND
            </if>
            <if test="searchKey != null and searchKey != ''">
                ${searchKey} LIKE CONCAT('%', #{searchValue}, '%')
                AND
            </if>
            i.member_id_seller = #{memberIdSeller}
        </where>
        <if test="startRowNum > -1">
            LIMIT #{startRowNum}, #{rowPerPage};
        </if>
    </select>

    <!-- 판매자 특정 투자펀딩 심사요청 조회 -->
    <select id="getInvestmentRequestJudgeByCode" parameterType="String" resultMap="adminInvestmentRequestJudgeListMap">
        /* 특정 투자펀딩 심사요청 조회 */
        SELECT
            inv.investment_code,
            inv.investment_subject,
            inv.investment_achievement_money AS invInvestmentAchievementMoney,
            inv.investment_amount,
            inv.invest_achievement_percent,
            inv.investment_deadline,
            i.investment_request_judge_code,
            i.law_satistify_code,
            l.law_satistify_reason,
            i.incongruity_sectors_code,
            i.company_business_type_code,
            i.corporate_value_evaluation_code,
            i.store_code,
            i.investment_request_subject,
            i.member_id_seller,
            s.store_name,
            s.corporate_name AS corporateName,
            i.investment_company,
            s.representative_name,
            c.business_type AS cbtBusinessType,
            i.investment_request_content,
            i.investment_achievement_money,
            i.business_profits,
            i.depreciation,
            i.net_debt,
            i.stock_number,
            i.issue_stock_number,
            i.investment_request_date,
            i.invest_judge_date,
            i.member_id,
            i.invest_judge_result
        FROM
            investment_request_judge AS i
            LEFT JOIN
            investment AS inv
            ON
            i.investment_request_judge_code = inv.investment_request_judge_code
            INNER JOIN
            store AS s
            ON
            i.store_code = s.store_code
            INNER JOIN
            company_business_type AS c
            ON
            i.company_business_type_code = c.company_business_type_code
            LEFT JOIN
            law_satistify_reason AS l
            ON
            i.law_satistify_code = l.law_satistify_code
        WHERE
            i.member_id_seller = #{memberIdSeller}
            AND
            i.investment_request_judge_code = #{investmentRequestJudgeCode};
    </select>

    <!-- 판매자 투자후 기업정보 공개(주식) 목록 조회 -->
    <select id="getAfterFundRevenueStockList" resultMap="sellerAfterFundRevenueStockListMap">
        /* 판매자 투자후 기업정보 공개(주식) 목록 조회 */
        SELECT
            af.after_fund_revenue_stock_code,
            af.member_id,
            af.investment_code,
            af.after_investment_amount,
            af.investment_amount,
            af.take,
            af.operating_profit,
            af.net_income,
            af.sales_date_enterprise_value,
            af.sales_base_stock_price,
            af.dividend_amount,
            af.upload_date
        FROM
            after_fund_revenue_stock AS af
        WHERE
            af.member_id = #{memberId}
        <if test="startRowNum > -1">
            LIMIT #{startRowNum}, #{rowPerPage};
        </if>
    </select>

    <!-- 판매자 투자후 기업정보 공개(주식) 전체 행의 갯수 -->
    <select id="getAfterFundRevenueStockCnt" resultType="int">
        /* 판매자 투자후 기업정보 공개(주식) 전체 행의 갯수 */
        SELECT
            COUNT(1)
        FROM
            after_fund_revenue_stock;
    </select>

    <!-- 판매자 검색조건에 따른 투자후 기업정보 공개(주식) 목록 조회 -->
    <select id="getAfterFundRevenueStockListBySearch" resultMap="sellerAfterFundRevenueStockListMap">
        /* 판매자 검색조건에 따른 투자후 기업정보 공개(주식) 목록 조회 */
        SELECT
            af.after_fund_revenue_stock_code,
            af.member_id,
            af.investment_code,
            af.after_investment_amount,
            af.investment_amount,
            af.take,
            af.operating_profit,
            af.net_income,
            af.sales_date_enterprise_value,
            af.sales_base_stock_price,
            af.dividend_amount,
            af.upload_date
        FROM
            after_fund_revenue_stock AS af
        <where>
            <if test="amDateSettStartDate != null and amDateSettStartDate != ''">
                DATE_FORMAT(i.investment_request_date, '%Y-%m-%d') >= #{amDateSettStartDate}
                AND
            </if>
            <if test="amDateSettEndDate != null and amDateSettEndDate != ''">
                #{amDateSettEndDate} >= DATE_FORMAT(i.investment_request_date, '%Y-%m-%d')
                AND
            </if>
            <if test="searchKey != null and searchKey != ''">
                ${searchKey} LIKE CONCAT('%', #{searchValue}, '%')
                AND
            </if>
            af.member_id = #{memberId}
        </where>
        <if test="startRowNum > -1">
            LIMIT #{startRowNum}, #{rowPerPage};
        </if>
    </select>

    <!-- 판매자 특정 기업정보 공개(주식) 조회 -->
    <select id="getAfterFundRevenueStockByCode" resultMap="sellerAfterFundRevenueStockListMap">
        /* 판매자 특정 기업정보 공개(주식) 조회 */
        SELECT
            af.after_fund_revenue_stock_code,
            af.member_id,
            af.investment_code,
            af.securities_issuance_stock_code,
            af.after_investment_amount,
            af.investment_amount,
            af.take,
            af.cost_of_sales,
            af.gross_profit,
            af.operating_profit,
            af.operating_cost,
            af.net_income,
            af.sales_date_enterprise_value,
            af.subscription_enterprise_value,
            af.sales_base_stock_price,
            af.issue_price,
            af.total_stock_number,
            af.dividend_amount,
            af.dividend_rate,
            af.dividend_per_stock,
            af.earnings_per_share,
            af.revenue_period_start,
            af.revenue_period_end,
            af.upload_date
        FROM
            after_fund_revenue_stock AS af
        WHERE
            af.member_id = #{memberId}
            AND
            af.after_fund_revenue_stock_code = #{afterFundRevenueStockCode};
    </select>

    <!-- 판매자 투자후 기업정보 공개(채권) 목록 조회 -->
    <select id="getAfterFundRevenueBondList" resultMap="sellerAfterFundRevenueBondListMap">
        /* 판매자 투자후 기업정보 공개(채권) 목록 조회 */
        SELECT
            af.after_fund_revenue_bond_code,
            af.member_id,
            af.investment_code,
            af.after_investment_amount,
            af.investment_amount,
            af.take,
            af.profit,
            af.net_income,
            af.account_price,
            af.interest_rate,
            af.earnings_per_account,
            af.upload_date
        FROM
            after_fund_revenue_bond AS af
        WHERE
            af.member_id = #{memberId}
        <if test="startRowNum > -1">
            LIMIT #{startRowNum}, #{rowPerPage};
        </if>
    </select>

    <!-- 판매자 투자후 기업정보 공개(채권) 전체 행의 갯수 -->
    <select id="getAfterFundRevenueBondCnt" resultType="int">
        /* 판매자 투자후 기업정보 공개(채권) 전체 행의 갯수 */
        SELECT
            COUNT(1)
        FROM
            after_fund_revenue_bond;
    </select>

    <!-- 판매자 검색조건에 따른 투자후 기업정보 공개(채권) 목록 조회 -->
    <select id="getAfterFundRevenueBondListBySearch" resultMap="sellerAfterFundRevenueBondListMap">
        /* 판매자 검색조건에 따른 투자후 기업정보 공개(채권) 목록 조회 */
        SELECT
            af.after_fund_revenue_bond_code,
            af.member_id,
            af.investment_code,
            af.after_investment_amount,
            af.investment_amount,
            af.take,
            af.profit,
            af.net_income,
            af.account_price,
            af.interest_rate,
            af.earnings_per_account,
            af.upload_date
        FROM
            after_fund_revenue_bond AS af
        <where>
            <if test="amDateSettStartDate != null and amDateSettStartDate != ''">
                DATE_FORMAT(i.investment_request_date, '%Y-%m-%d') >= #{amDateSettStartDate}
                AND
            </if>
            <if test="amDateSettEndDate != null and amDateSettEndDate != ''">
                #{amDateSettEndDate} >= DATE_FORMAT(i.investment_request_date, '%Y-%m-%d')
                AND
            </if>
            <if test="searchKey != null and searchKey != ''">
                ${searchKey} LIKE CONCAT('%', #{searchValue}, '%')
                AND
            </if>
            af.member_id = #{memberId}
        </where>
        <if test="startRowNum > -1">
            LIMIT #{startRowNum}, #{rowPerPage};
        </if>
    </select>

    <!-- 판매자 특정 기업정보 공개(채권) 조회 -->
    <select id="getAfterFundRevenueBondByCode" resultMap="sellerAfterFundRevenueBondListMap">
        /* 판매자 특정 기업정보 공개(채권) 조회 */
        SELECT
            af.after_fund_revenue_bond_code,
            af.member_id,
            af.investment_code,
            af.after_investment_amount,
            af.investment_amount,
            af.take,
            af.profit,
            af.cost,
            af.net_income,
            af.visitors_number,
            af.account_price,
            af.interest_rate,
            af.total_bond_number,
            af.earnings_per_account,
            af.revenue_period_start,
            af.revenue_period_end,
            af.upload_date
        FROM
            after_fund_revenue_bond AS af
        WHERE
            af.member_id = #{memberId}
            AND
            af.after_fund_revenue_bond_code = #{afterFundRevenueBondCode};
    </select>

    <select id="getsecuritiesIssuanceStockListByCode" resultType="SellersecuritiesIssuanceStock">
        SELECT
            sis.investment_code AS investmentCode,
            sis.corp_value AS corpValue,
            sis.stock_price AS stockPrice
        FROM
            securities_issuance_stock AS sis
        WHERE
            s.member_id = #{memberId}
        AND
            s.investment_code = #{investmentCode};
    </select>

    <!-- 판매자 투자 후 분배 목록 조회 -->
    <select id="getAfterInvestDivision" resultMap="sellerAfterInvestDivisionListMap">
        /* 판매자 투자 후 분배 목록 조회 */
        SELECT
            a.after_invest_division_code,
            a.member_id,
            a.investment_code,
            a.member_id_customer,
            a.invest_cost,
            a.after_operate_division,
            a.after_operate_division_accumulate,
            a.round,
            a.division_date
        FROM
            after_invest_division AS a
        WHERE
            a.member_id = #{memberId}
        <if test="startRowNum > -1">
            LIMIT #{startRowNum}, #{rowPerPage};
        </if>
    </select>

    <!-- 판매자 투자 후 분배 전체 행의 갯수 -->
    <select id="getAfterInvestDivisionCnt" resultType="int">
        /* 판매자 투자 후 분배 전체 행의 갯수 */
        SELECT
            COUNT(1)
        FROM
            after_invest_division;
    </select>

    <!-- 판매자 검색조건에 따른 투자후 분배 목록 조회 -->
    <select id="getAfterInvestDivisionBySearch" resultMap="sellerAfterInvestDivisionListMap">
        /* 판매자 투자 후 분배 목록 조회 */
        SELECT
            a.after_invest_division_code,
            a.member_id,
            a.investment_code,
            a.member_id_customer,
            a.invest_cost,
            a.after_operate_division,
            a.after_operate_division_accumulate,
            a.round,
            a.division_date
        FROM
            after_invest_division AS a
        <where>
            <if test="amDateSettStartDate != null and amDateSettStartDate != ''">
                DATE_FORMAT(i.investment_request_date, '%Y-%m-%d') >= #{amDateSettStartDate}
                AND
            </if>
            <if test="amDateSettEndDate != null and amDateSettEndDate != ''">
                #{amDateSettEndDate} >= DATE_FORMAT(i.investment_request_date, '%Y-%m-%d')
                AND
            </if>
            <if test="searchKey != null and searchKey != ''">
                ${searchKey} LIKE CONCAT('%', #{searchValue}, '%')
                AND
            </if>
            a.member_id = #{memberId}
        </where>
        <if test="startRowNum > -1">
            LIMIT #{startRowNum}, #{rowPerPage};
        </if>
    </select>

    <!-- 판매자 자본시장법 범위충족기준 목록 조회 -->
    <select id="getLawSatistifyList" resultMap="adminLawSatistifyReasonListMap">
        /* 자본시장법 범위충족기준 목록 조회 */
        SELECT
            l.law_satistify_code,
            l.law_satistify_reason,
            l.member_id,
            l.law_satistify_whether,
            l.code_reg_day
        FROM
            law_satistify_reason AS l
    </select>

    <!-- 판매자 부적합 업종 목록 조회 -->
    <select id="getIncogruitySectorsList" resultMap="adminIncongruitySectorsListMap">
        /* 부적합 업종 목록 조회 */
        SELECT
            i.incongruity_sectors_code,
            i.incongruity_sectors_business,
            i.member_id,
            i.incongruity_sectors_whether,
            i.code_reg_day
        FROM
            incongruity_sectors AS i;
    </select>

    <!-- 판매자 특정 기업가치 평가결과 조회 -->
    <select id="getCorporateValueEvaluationByCode" resultMap="adminCorporateValueEvaluationListMap">
        /* 특정 기업가치 평가결과 조회 */
        SELECT
            i.investment_request_judge_code,
            i.investment_request_subject,
            i.investment_request_content,
            i.investment_request_date,
            i.member_id_seller,
            i.investment_achievement_money AS invInvestmentAchievementMoney,
            i.issue_stock_number,
            c.corporate_value_evaluation_code,
            c.member_id,
            c.operating_profit,
            c.depreciation,
            c.ebitda,
            c.ev_ebitda,
            c.convert_ev,
            c.net_debt,
            c.evaluated_corp_value,
            c.stock_number,
            c.stock_price,
            c.corp_value_fulfill,
            c.corp_value_evaluate_day
        FROM
            corporate_value_evaluation AS c
            INNER JOIN
            investment_request_judge AS i
            ON
            c.corporate_value_evaluation_code = i.corporate_value_evaluation_code
        WHERE
            c.corporate_value_evaluation_code = #{corporateValueEvaluationCode};
    </select>

    <insert id="addAfterFundRevenueStock" parameterType="SellerAfterFundRevenueStock">
        <selectKey keyProperty="afterFundRevenueStockCode" resultType="String">
            SELECT
                (CASE
                WHEN COUNT(af.after_fund_revenue_stock_code) = 0 THEN CONCAT('afr_stc_', CURDATE()+0, '_0001')
                WHEN MAX(af.after_fund_revenue_stock_code) = CONCAT('afr_stc_', CURDATE()+0, '_9999') THEN CONCAT('afr_stc_', CURDATE()+0, '_', MAX(CAST(SUBSTRING_INDEX(af.after_fund_revenue_stock_code,'_',-1) AS UNSIGNED))+1)
                ELSE CONCAT('afr_stc_', CURDATE()+0, '_', LPAD(MAX(CAST(SUBSTRING_INDEX(af.after_fund_revenue_stock_code,'_',-1) AS UNSIGNED))+1, 4, '0'))
                END) AS afterFundRevenueStockCode
            FROM
                after_fund_revenue_stock AS af
            WHERE
                SUBSTRING_INDEX(SUBSTRING_INDEX(af.after_fund_revenue_stock_code, '_', 3), '_', -1) = CURDATE()+0;
        </selectKey>
        INSERT INTO after_fund_revenue_stock
            (after_fund_revenue_stock_code, member_id, investment_code, securities_issuance_stock_code, after_investment_amount, investment_amount, take, cost_of_sales, gross_profit, operating_profit, operating_cost, net_income, sales_date_enterprise_value, subscription_enterprise_value, sales_base_stock_price, issue_price, total_stock_number, dividend_amount, dividend_rate, dividend_per_stock, earnings_per_share, revenue_period_start, revenue_period_end, upload_date)
        VALUES
            (#{afterFundRevenueStockCode}, #{memberId}, #{investmentCode}, #{securitiesIssuanceStockCode}, #{afterInvestmentAmount}, #{investmentAmount}, #{take}, #{costOfSales}, #{grossProfit}, #{operatingProfit}, #{operatingCost}, #{netIncome}, #{salesDateEnterpriseValue}, #{subscriptionEnterpriseValue}, #{salesBaseStockPrice}, #{issuePrice}, #{totalStockNumber}, #{dividendAmount}, #{dividendRate}, #{dividendPerStock}, #{earningsPerShare}, #{revenuePeriodStart}, #{revenuePeriodEnd}, NOW());
    </insert>

    <!-- 판매자 투자펀딩 공고 수정 -->
    <update id="modifyInvestment" parameterType="AdminInvestment">
        /* 판매자 투자펀딩 공고 수정 */
        UPDATE investment
        <set>
            <if test="investmentSubject != null and investmentSubject != ''">
                investment_subject = #{investmentSubject},
            </if>
            <if test="invInvestmentAchievementMoney != null and invInvestmentAchievementMoney != ''">
                investment_achievement_money = #{invInvestmentAchievementMoney},
            </if>
            <if test="invInvestmentAchievementMoney == 0">
                investment_achievement_money = #{invInvestmentAchievementMoney},
            </if>
            <if test="investmentAmount != null and investmentAmount != ''">
                investment_amount = #{investmentAmount},
            </if>
            <if test="investmentAmount == 0">
                investment_amount = #{investmentAmount},
            </if>
            <if test="securitiesClassification != null and securitiesClassification != ''">
                securities_classification = #{securitiesClassification}
            </if>
        </set>
        WHERE
            investment_code = #{investmentCode};
    </update>

    <!-- 판매자 투자펀딩 공고 상세 수정 -->
    <update id="modifyInvestmentContent" parameterType="SellerInvestmentContent">
        UPDATE investment_content
        <set>
            <if test="projectIntroduction != null and projectIntroduction != ''">
                project_introduction = #{projectIntroduction},
            </if>
            <if test="marketAnalysis != null and marketAnalysis != ''">
                market_analysis = #{marketAnalysis},
            </if>
            <if test="majorFinancialInformation != null and majorFinancialInformation != ''">
                major_financial_information = #{majorFinancialInformation},
            </if>
            <if test="risk != null and risk != ''">
                risk = #{risk},
            </if>
            <if test="majorManpower != null and majorManpower != ''">
                major_manpower = #{majorManpower},
            </if>
            <if test="patentAwardDetails != null and patentAwardDetails != ''">
                patent_award_details = #{patentAwardDetails},
            </if>
            <if test="etcInvestContent != null and etcInvestContent != ''">
                etc_invest_content = #{etcInvestContent}
            </if>
        </set>
        WHERE
            investment_content_code = #{investmentContentCode};
    </update>

    <!-- 판매자 투자펀딩 심사요청 수정 -->
    <update id="modifyInvestmentRequestJudge" parameterType="AdminInvestmentRequestJudge">
        /* 판매자 투자펀딩 심사요청 수정 */
        UPDATE investment_request_judge
        <set>
            <if test="investmentRequestJudgeCode != null and investmentRequestJudgeCode != ''">
                investment_request_judge_code = #{investmentRequestJudgeCode},
            </if>
            <if test="lawSatistifyCode != null and lawSatistifyCode != ''">
                law_satistify_code = #{lawSatistifyCode},
            </if>
            <if test="lawSatistifyCode == null or lawSatistifyCode == ''">
                law_satistify_code = null,
            </if>
            <if test="incongruitySectorsCode != null and incongruitySectorsCode != ''">
                incongruity_sectors_code = #{incongruitySectorsCode},
            </if>
            <if test="incongruitySectorsCode == null or incongruitySectorsCode == ''">
                incongruity_sectors_code = null,
            </if>
            <if test="companyBusinessTypeCode != null and companyBusinessTypeCode != ''">
                company_business_type_code = #{companyBusinessTypeCode},
            </if>
            <if test="corporateValueEvaluationCode != null and corporateValueEvaluationCode != ''">
                corporate_value_evaluation_code = #{corporateValueEvaluationCode},
            </if>
            <if test="storeCode != null and storeCode != ''">
                store_code = #{storeCode},
            </if>
            <if test="investmentRequestSubject != null and investmentRequestSubject != ''">
                investment_request_subject = #{investmentRequestSubject},
            </if>
            <if test="memberIdSeller != null and memberIdSeller != ''">
                member_id_seller = #{memberIdSeller},
            </if>
            <if test="memberIdSeller != null and memberIdSeller != ''">
                member_id_seller = #{memberIdSeller},
            </if>
            <if test="investmentCompany != null and investmentCompany != ''">
                investment_company = #{investmentCompany},
            </if>
            <if test="invBusinessType != null and invBusinessType != ''">
                business_type = #{invBusinessType},
            </if>
            <if test="investmentAchievementMoney != null and investmentAchievementMoney != ''">
                investment_achievement_money = #{investmentAchievementMoney},
            </if>
            <if test="businessProfits != null and businessProfits != ''">
                business_profits = #{businessProfits},
            </if>
            <if test="depreciation != null and depreciation != ''">
                depreciation = #{depreciation},
            </if>
            <if test="netDebt != null and netDebt != ''">
                net_debt = #{netDebt},
            </if>
            <if test="netDebt != null and netDebt != ''">
                net_debt = #{netDebt},
            </if>
            <if test="stockNumber != null and stockNumber != ''">
                stock_number = #{stockNumber},
            </if>
            <if test="issueStockNumber != null and issueStockNumber != ''">
                issue_stock_number = #{issueStockNumber}
            </if>
        </set>
        WHERE
            investment_request_judge_code = #{investmentRequestJudgeCode};
    </update>

    <!-- 판매자 투자후 기업정보 공개(주식) 수정 -->
    <update id="modifyAfterFundRevenueStock" parameterType="String">
        /* 판매자 투자후 기업정보 공개(주식) 수정 */
        UPDATE after_fund_revenue_stock
        <set>
            <if test="afterInvestmentAmount != null and afterInvestmentAmount != ''">
                after_investment_amount = #{afterInvestmentAmount},
            </if>
            <if test="salesDateEnterpriseValue != null and salesDateEnterpriseValue != ''">
                sales_date_enterprise_value = #{salesDateEnterpriseValue},
            </if>
            <if test="salesBaseStockPrice != null and salesBaseStockPrice != ''">
                sales_base_stock_price = #{salesBaseStockPrice},
            </if>
            <if test="issuePrice != null and issuePrice != ''">
                issue_price = #{issuePrice},
            </if>
            <if test="totalStockNumber != null and totalStockNumber != ''">
                total_stock_number = #{totalStockNumber},
            </if>
            <if test="dividendAmount != null and dividendAmount != ''">
                dividend_amount = #{dividendAmount},
            </if>
            <if test="take != null and take != ''">
                take = #{take},
            </if>
            <if test="costOfSales != null and costOfSales != ''">
                cost_of_sales = #{costOfSales},
            </if>
            <if test="grossProfit != null and grossProfit != ''">
                gross_profit = #{grossProfit},
            </if>
            <if test="operatingProfit != null and operatingProfit != ''">
                operating_profit = #{operatingProfit},
            </if>
            <if test="operatingCost != null and operatingCost != ''">
                operating_cost = #{operatingCost},
            </if>
            <if test="netIncome != null and netIncome != ''">
                net_income = #{netIncome},
            </if>
            <if test="dividendPerStock != null and dividendPerStock != ''">
                dividend_per_stock = #{dividendPerStock},
            </if>
            <if test="earningsPerShare != null and earningsPerShare != ''">
                earnings_per_share = #{earningsPerShare},
            </if>
             <if test="revenuePeriodStart != null and revenuePeriodStart != ''">
                 revenue_period_start = #{revenuePeriodStart},
            </if>
             <if test="revenuePeriodEnd != null and revenuePeriodEnd != ''">
                 revenue_period_end = #{revenuePeriodEnd}
            </if>
        </set>
        WHERE
            after_fund_revenue_stock_code = #{afterFundRevenueStockCode};
    </update>

    <update id="modifyAfterFundRevenueBond" parameterType="String">
        /* 판매자 투자후 기업정보 공개(채권) 수정 */
        UPDATE after_fund_revenue_bond
        <set>
            <if test="afterInvestmentAmount != null and afterInvestmentAmount != ''">
                after_investment_amount = #{afterInvestmentAmount},
            </if>
            <if test="take != null and take != ''">
                take = #{take},
            </if>
            <if test="profit != null and profit != ''">
                profit = #{profit},
            </if>
            <if test="visitorsNumber != null and visitorsNumber != ''">
                visitors_number = #{visitorsNumber},
            </if>
            <if test="interestRate != null and interestRate != ''">
                interest_rate = #{interestRate},
            </if>
            <if test="cost != null and cost != ''">
                cost = #{cost},
            </if>
            <if test="netIncome != null and netIncome != ''">
                net_income = #{netIncome},
            </if>
            <if test="earningsPerAccount != null and earningsPerAccount != ''">
                earnings_per_account = #{earningsPerAccount},
            </if>
            <if test="revenuePeriodStart != null and revenuePeriodStart != ''">
                revenue_period_start = #{revenuePeriodStart},
            </if>
            <if test="revenuePeriodEnd != null and revenuePeriodEnd != ''">
                revenue_period_end = #{revenuePeriodEnd}
            </if>
        </set>
        WHERE
            after_fund_revenue_bond_code = #{afterFundRevenueBondCode};
    </update>

    <!-- 판매자 투자펀딩 공고 삭제 -->
    <delete id="removeInvestment" parameterType="String">
        /* 판매자 투자펀딩 공고 삭제 */
        DELETE
        FROM
            investment
        WHERE
            investment_code = #{investmentCode};
    </delete>

    <delete id="removeInvestmentContent" parameterType="String">
        DELETE
        FROM
            investment_content
        WHERE
            investment_content_code = #{investmentContentCode};
    </delete>

    <!-- 판매자 투자펀딩 심사요청 삭제 -->
    <delete id="removeInvestmentRequestJudge" parameterType="String">
        /* 투자펀딩 심사요청 삭제 */
        DELETE
        FROM
            investment_request_judge
        WHERE
            investment_request_judge_code = #{investmentRequestJudgeCode};
    </delete>

    <!-- 판매자 투자후 기업정보 공개(주식) 삭제 -->
    <delete id="removeAfterFundRevenueStock" parameterType="String">
        /* 판매자 투자후 기업정보 공개(주식) 삭제 */
        DELETE
        FROM
            after_fund_revenue_stock
        WHERE
            after_fund_revenue_stock_code = #{afterFundRevenueStockCode};
    </delete>

    <!-- 판매자 투자후 기업정보 공개(채권) 삭제 -->
    <delete id="removeAfterFundRevenueBond" parameterType="String">
        /* 판매자 투자후 기업정보 공개(채권) 삭제 */
        DELETE
        FROM
        after_fund_revenue_bond
        WHERE
        after_fund_revenue_bond_code = #{afterFundRevenueBondCode};
    </delete>

    <select id="getInvestmentInfo" parameterType="String">
        SELECT
        i.investment_code AS investmentCode,
        i.member_id AS memberId,
        i.store_code AS storeCode,
        i.investment_request_judge_code AS investmentRequestJudgeCode,
        i.total_category_code AS totalCategoryCode,
        i.member_id_seller AS memberIdSeller,
        i.investment_image AS investmentImage,
        i.investment_like AS investmentLike,
        i.investment_achievement_money AS investmentAchievementMoney,
        i.search_count AS searchCount,
        i.invest_count AS investCount,
        i.securities_classification AS securitiesClassification,
        i.investment_display_date AS investmentDisplayDate,
        i.investment_reg_date AS investmentRegDate,
        i.investment_report AS investmentReport,
        i.basic_fee AS basicFee,
        i.contract_fee_rate AS contractFeeRate,
        i.contract_file AS contractFile,
        i.invest_judge_situation AS investJudgeSituation,
        i.invest_achievement_percent AS investAchievementPercent,
        i.investment_subject AS investmentSubject,
        i.investment_amount AS investmentAmount,
        DATEDIFF(investment_deadline, CURDATE()) AS investmentDeadlineCnt,
        i.investment_company AS investmentCompany
        FROM
        investment AS i
    </select>



    <select id="getNews" resultType="NewsList">
        SELECT
            n.news_code AS newsCode,
            n.project_code AS projectCode,
            n.news_subject AS newsSubject,
            n.news_content AS newsContent,
            n.news_datetime AS newsDatetime,
            n.news_modify_datetime AS newsModifyDatetime,
            n.news_delete_datetime AS newsDeleteDatetime,
            n.news_display AS newsDisplay
        FROM
            news AS n;
    </select>



</mapper>